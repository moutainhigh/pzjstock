/**
 * piaozhijia.com Inc.
 * Copyright (c) 2004-2016 All Rights Reserved.
 */
package com.pzj.core.stock;

import java.util.ArrayList;

import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import com.pzj.core.stock.model.SeatChartModel;
import com.pzj.core.stock.service.SeatChartService;
import com.pzj.framework.context.Result;
import com.pzj.framework.converter.JSONConverter;
import com.pzj.framework.exception.ServiceException;
import com.pzj.framework.toolkit.Check;

/**
 * 
 * @author Administrator
 * @version $Id: SeatChartTest.java, v 0.1 2016年8月11日 下午2:07:01 Administrator Exp $
 */
public class SeatChartTest {

	Logger logger = LoggerFactory.getLogger(SeatChartTest.class);
	static ApplicationContext context = null;

	private SeatChartService seatChartService;

	@BeforeClass
	public static void setUpClass() {
		context = new ClassPathXmlApplicationContext("applicationContext-test.xml");
		System.out.println(context);
	}

	@Before
	public void setUp() {
		seatChartService = context.getBean(SeatChartService.class);
	}

	//    @Test
	public void testAddSeatChart() {
		//        String aAreaSeatMaps = "A2,_,_,_,24,22,20,18,16,_,_,_,_,_,17,19,21,23,25,_;A3,_,_,_,26,24,22,20,18,_,_,_,_,_,17,19,21,23,25,_;A4,_,_,_,26,24,22,20,18,_,_,_,_,_,19,21,23,25,27,_;A5,_,_,_,28,26,24,22,20,_,_,_,_,_,19,21,23,25,27,_;A6,_,_,32,30,28,26,24,22,_,_,_,_,_,19,21,23,25,27,29,_;A7,_,_,32,30,28,26,24,22,_,_,_,_,_,21,23,25,27,29,31,_;A8,_,_,32,30,28,26,24,22,_,_,_,_,_,23,25,27,29,31,33,_;A9,_,_,34,32,30,28,26,24,_,_,_,_,_,23,25,27,29,31,33,_;A10,38,36,34,32,30,28,26,_,_,_,_,_,23,25,27,29,31,33,35,_;A11,38,36,34,32,30,28,26,_,_,_,_,_,25,27,29,31,33,35,37,_;A12,38,36,34,32,30,28,26,_,_,_,_,_,23,25,27,29,31,33,35,_;_,_,_,_,_,_,_,_,_,_,_,_,_,_;A13,_,36,34,32,30,28,26,_,_,_,_,_,25,27,29,31,33,35,_;A14,_,_,34,32,30,28,26,_,_,_,_,_,23,25,27,29,31,_;A15,_,_,_,30,28,26,24,_,_,_,_,_,23,25,27,29,_;A16,_,_,_,32,30,28,26,_,_,_,_,_,23,25,27,29,_;A17,_,_,_,30,28,26,24,_,_,_,_,_,23,25,27,29,_;A18,_,_,32,30,28,26,24,_,_,_,_,_,21,23,25,27,29,_;A19,_,_,30,28,26,24,22,_,_,_,_,_,21,23,25,27,29,_;A20,_,_,_,26,24,22,20,_,_,_,_,_,17,19,21,23,_;A21,_,_,_,_,_,30,28,_,_,_,_,_,25,27,_";
		//        String bAreaSeatMaps = "B1,_,_,_,_,_,_,_,_,_,_,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37,35,33,31;B2,_,_,_,_,_,_,_,_,_,_,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37,35,33,31;B3,_,_,_,_,_,_,_,_,_,_,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37,35,33,31;B4,_,_,_,_,_,_,_,_,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37,35,33,31;B5,_,_,_,_,_,_,_,_,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37,35,33,31;B6,_,_,_,_,_,_,_,_,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37,35,33;B7,_,_,_,_,_,_,_,_,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37,35,33;B8,_,_,_,_,_,_,_,_,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37,35,33;B9,_,_,_,_,_,_,_,_,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37,35,33;B10,_,_,_,_,_,_,_,81,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37,35,33;B11,_,_,_,_,91,89,_,87,85,83,81,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37,35;B12,_,95,93,91,89,_,87,85,83,81,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37,35;B13,97,95,93,91,_,89,87,85,83,81,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37;B14,99,97,95,93,_,91,89,87,85,83,81,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37;B15,99,97,95,93,_,91,89,87,85,83,81,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37;B16,99,97,95,93,_,91,89,87,85,83,81,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37;B17,99,97,95,93,_,91,89,87,85,83,81,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39,37;B18,103,101,99,97,_,95,93,91,89,87,85,83,81,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39;B19,105,103,101,99,_,97,95,93,91,89,87,85,83,81,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39;B20,105,103,101,99,_,97,95,93,91,89,87,85,83,81,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41,39;B21,105,103,101,_,99,97,95,93,91,89,87,85,83,81,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41;B22,105,103,101,_,99,97,95,93,91,89,87,85,83,81,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41;B23,103,101,_,99,97,95,93,91,89,87,85,83,81,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41;B24,105,103,101,99,97,95,93,91,89,87,85,83,81,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43,41;B25,_,103,101,99,97,95,93,91,89,87,85,83,81,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43;B26,_,_,_,_,_,_,_,_,_,_,_,_,_,_,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43;B27,_,_,_,_,_,_,_,_,_,_,_,_,_,79,77,75,73,71,69,67,65,63,61,59,57,55,53,51,49,47,45,43;B28,_,_,_,_,_,_,_,_,_,_,_,_,_,57,55,53,51,49,47,45,43";
		String vipAreaSeatMaps = "VI腻PA6,_,_,_,_,_,_,20,18,16,14,12,10,8,6,4,2,1,3,5,7,9,11,13,15,17,_;VIPA7,_,_,_,_,_,20,18,16,14,12,10,8,6,4,2,1,3,5,7,9,11,13,15,17,19,_;VIPA8,_,_,_,_,20,18,16,14,12,10,8,6,4,2,1,3,5,7,9,11,13,15,17,19,21,_;VIPA9,_,_,_,22,20,18,16,14,12,10,8,6,4,2,1,3,5,7,9,11,13,15,17,19,21,_;VIPA10,_,_,24,22,20,18,16,14,12,10,8,6,4,2,1,3,5,7,9,11,_;";
		SeatChartModel seatChartModel = new SeatChartModel();
		seatChartModel.setScenicId(2216619741563800L);
		seatChartModel.setAreaId(4L);
		seatChartModel.setSeatMaps(vipAreaSeatMaps);
		seatChartModel.setSort(1);
		try {
			seatChartService.addSeatChart(seatChartModel, null);
		} catch (Exception e) {
			if (e instanceof ServiceException) {
				logger.error("异常：" + e.getMessage());
			} else {
				logger.error("未处理异常：", e);
			}
		}
	}

	//    @Test
	public void testQuerySeatChart() {
		SeatChartModel seatChartModel = new SeatChartModel();
		//        seatChartModel.setScenicId(2216619741563801L);
		//        seatChartModel.setAreaId(2L);
		seatChartModel.setAreaScreeningsId(1L);
		try {
			Result<ArrayList<SeatChartModel>> result = seatChartService.querySeatChartByScenicAndAreaRel(
					seatChartModel, null);
			if (result.isOk() && !Check.NuNCollections(result.getData())) {
				ArrayList<SeatChartModel> seatChartList = result.getData();

				System.out.println("seatChartList====" + JSONConverter.toJson(seatChartList));
				//                System.out.println("seatChartList size======" + seatChartList.size());
				//                SeatChartModel chartModel = seatChartList.get(0);
				//                System.out.println("chartModel getScenicId======" + chartModel.getScenicId());
				//                System.out.println("chartModel getAreaId======" + chartModel.getAreaId());
				//                System.out.println("chartModel getSeatMaps======" + chartModel.getSeatMaps());
				//                System.out.println("chartModel getSort======" + chartModel.getSort());
				//                System.out.println("chartModel getTotalSeats======" + chartModel.getTotalSeats());
			}

		} catch (Exception e) {
			if (e instanceof ServiceException) {
				logger.error("异常：" + e.getMessage());
			} else {
				logger.error("未处理异常：", e);
			}
		}
	}

	//	@Test
	public void addSeatChartAndInitSeatTest() {

		//{"scenicId": 2216619741563800,"areaId": 2216619741564407,"seatMaps":"VIP啊A6,_,_,_,_,_,_,20,18,16,14,12,10,8,6,4,2,1,3,5,7,9,11,13,15,17,_;VIPA7,_,_,_,_,_,20,18,16,14,12,10,8,6,4,2,1,3,5,7,9,11,13,15,17,19,_;","sort": 1},{}
		//        String vipAreaSeatMaps = "VIPA6,_,_,_,_,_,_,20,18,16,14,12,10,8,6,4,2,1,3,5,7,9,11,13,15,17,_;VIPA7,_,_,_,_,_,20,18,16,14,12,10,8,6,4,2,1,3,5,7,9,11,13,15,17,19,_;VIPA8,_,_,_,_,20,18,16,14,12,10,8,6,4,2,1,3,5,7,9,11,13,15,17,19,21,_;VIPA9,_,_,_,22,20,18,16,14,12,10,8,6,4,2,1,3,5,7,9,11,13,15,17,19,21,_;VIPA10,_,_,24,22,20,18,16,14,12,10,8,6,4,2,1,3,5,7,9,11,_;";
		String vipAreaSeatMaps = "A1,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15;A2,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15;A3,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15;A4,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15;A5,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15;A6,1,2,3,4,5,6,7,8,9,10,11,12,13;A7,1,2,3,4,5,6,7,8,9,10,11,12,13;A8,1,2,3,4,5,6,7,8,9,10,11,12,13;A9,1,2,3,4,5,6,7,8,9,10,11,12,13;A10,1,2,3,4,5,6,7,8,9,10,11,12,13;A11,1,2,3,4,5,6,7,8,9,10,11,12,13;A12,1,2,3,4,5,6,7,8,9,10,11,12,13;B1,1,2,_,_,3,4;B2,1,2,3,4,_,_,5,6,7,8;B3,1,2,3,4,5,_,_,6,7,8,9,10;B4,1,2,3,4,5,6,7,_,_,8,9,10,11,12,13,14;B5,1,2,3,4,5,6,7,8,_,_,9,10,11,12,13,14,15,16;B6,1,2,3,4,5,6,7,8,9,10,_,_,11,12,13,14,15,16,17,18,19,20;B7,1,2,3,4,5,6,7,8,9,10,11,_,_,12,13,14,15,16,17,18,19,20,21,22;B8,1,2,3,4,5,6,7,8,9,10,11,12,_,_,13,14,15,16,17,18,19,20,21,22,23,24;B9,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20;B10,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20;B11,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20;C9,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19;C10,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19;C11,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19;C12,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19;C13,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19;C14,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20;C15,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20;D8,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19;D9,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19;D10,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19;D11,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19;D12,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19;D13,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19;D14,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,_,20,21,22,23,24,25,26,27,28,29,30,31,32,33;D15,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,_,20,21,22,23,24,25,26,27,28,29,30,31,32,33;E1,1,2,_,_,3,4;E2,1,2,3,4,_,_,5,6,7,8;E3,1,2,3,4,5,_,_,6,7,8,9,10;E4,1,2,3,4,5,6,7,_,_,8,9,10,11,12,13,14;E5,1,2,3,4,5,6,7,8,_,_,9,10,11,12,13,14,15,16;E6,1,2,3,4,5,6,7,8,9,10,_,_,11,12,13,14,15,16,17,18,19,20;E7,1,2,3,4,5,6,7,8,9,10,11,_,_,12,13,14,15,16,17,18,19,20,21,22;E8,1,2,3,4,5,6,7,8,9,10,11,12,_,_,13,14,15,16,17,18,19,20,21,22,23,24;E9,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20;E10,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20;E11,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20;F1,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15;F2,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15;F3,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15;F4,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15;F5,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15;F6,1,2,3,4,5,6,7,8,9,10,11,12,13;F7,1,2,3,4,5,6,7,8,9,10,11,12,13;F8,1,2,3,4,5,6,7,8,9,10,11,12,13;F9,1,2,3,4,5,6,7,8,9,10,11,12,13;F10,1,2,3,4,5,6,7,8,9,10,11,12,13;F11,1,2,3,4,5,6,7,8,9,10,11,12,13;F12,1,2,3,4,5,6,7,8,9,10,11,12,13;";
		SeatChartModel seatChartModel = new SeatChartModel();
		seatChartModel.setScenicId(2216619741563804L);
		seatChartModel.setAreaId(166L);
		seatChartModel.setSeatMaps(vipAreaSeatMaps);
		seatChartModel.setSort(1);
		Result<Boolean> result = seatChartService.addSeatChartInitSeat(seatChartModel, null);
		if (result.isOk()) {
			System.out.println("result=====" + JSONConverter.toJson(result));
		}

		//        SeatChart seatChart = new SeatChart();
		//        seatChart.setSeatMaps(vipAreaSeatMaps);
		//        checkSeatChart(seatChart);
	}

	@Test
	public void testTransferSeatChart() {
		Result<Boolean> result = seatChartService.transferSeatChartData();
		logger.info("testTransferSeatChart:", JSONConverter.toJson(result));
	}
}
